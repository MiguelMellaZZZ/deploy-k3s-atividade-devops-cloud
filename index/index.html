<!doctype html>
<html lang="pt-BR">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>sOnar — Explorador Interativo dos Planetas</title>
  <style>
    /* ===== Reset & base ===== */
    :root{
      --bg:#070617;
      --accent:#7be0ff;
      --accent-2:#7f6bff;
      --muted:#9aa0b4;
      --glass: rgba(255,255,255,0.06);
      --card: rgba(255,255,255,0.03);
      --glass-2: rgba(255,255,255,0.025);
      --maxw:1200px;
      --ease: cubic-bezier(.2,.9,.3,1);
    }
    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0;
      font-family: Inter, system-ui, -apple-system, 'Segoe UI', Roboto, 'Helvetica Neue', Arial;
      background: radial-gradient(1200px 600px at 10% 10%, rgba(60,70,120,0.08), transparent),
                  linear-gradient(180deg,#020214 0%, var(--bg) 35%);
      color:#e6eef9;
      overflow-x:hidden;
      -webkit-font-smoothing:antialiased;
      -moz-osx-font-smoothing:grayscale;
    }

    /* ===== Starfield canvas fills background ===== */
    #starfield{position:fixed;inset:0;z-index:0;display:block}

    /* ===== Page layout ===== */
    .wrap{position:relative;z-index:2;max-width:var(--maxw);margin:0 auto;padding:48px 20px 140px}

    header{
      display:flex;align-items:center;gap:18px;margin:18px 0 40px
    }
    .title{font-size:48px;letter-spacing:2px;display:flex;align-items:center;gap:10px}
    .title .s{font-weight:700;color:var(--accent-2);text-transform:lowercase}
    /* the 'O' as moon */
    .title .o-moon{
      width:78px;height:78px;border-radius:50%;position:relative;flex:0 0 78px;box-shadow:0 8px 30px rgba(0,0,0,.6), inset -6px -8px 20px rgba(255,255,255,0.03);
      background: radial-gradient(circle at 30% 20%, rgba(255,255,255,0.08), transparent 10%),
                  radial-gradient(circle at 70% 70%, rgba(0,0,0,0.18), transparent 30%),
                  linear-gradient(180deg,#dfe6ea 0%, #bfc8d1 100%);
      transform:translateY(0);
      border:2px solid rgba(255,255,255,0.06);
      overflow:hidden
    }
    /* moon craters */
    .o-moon::before, .o-moon::after{content:'';position:absolute;border-radius:50%;background:rgba(0,0,0,0.18);mix-blend-mode:multiply}
    .o-moon::before{width:26px;height:26px;left:10px;top:18px;box-shadow:0 6px 10px rgba(0,0,0,.25)}
    .o-moon::after{width:40px;height:40px;right:6px;bottom:10px;box-shadow:0 8px 18px rgba(0,0,0,.22)}
    .title .nar{font-weight:600;opacity:.9;color:var(--accent)}

    /* subtitle */
    .subtitle{color:var(--muted);margin-top:6px;font-size:14px}

    /* ===== Sections & reveal ===== */
    section{min-height:80vh;padding:60px 12px;border-radius:18px;margin:28px 0;backdrop-filter: blur(6px);}
    .hero{display:flex;align-items:center;gap:30px}
    .panel{flex:1;position:relative}
    .panel .lead{font-size:20px;line-height:1.4;color:#cfefff;max-width:720px}

    /* planets row */
    .planets-row{display:flex;flex-wrap:wrap;gap:18px;align-items:center}

    .planet{
      width:120px;height:120px;border-radius:50%;position:relative;cursor:pointer;display:flex;align-items:center;justify-content:center;
      box-shadow:0 12px 30px rgba(0,0,0,.6), inset 0 -8px 24px rgba(255,255,255,.02);
      transition:transform .6s var(--ease), filter .4s;
      transform:translateY(20px) scale(.95);opacity:0;backface-visibility:hidden;
    }
    .planet .label{position:absolute;bottom:-38px;font-size:13px;color:var(--muted);opacity:0;transform:translateY(6px);transition:opacity .4s, transform .4s}
    .planet:hover{transform:translateY(-6px) scale(1.06);filter:brightness(1.06) saturate(1.08)}

    /* different planets styles */
    .planet.mercury{background:linear-gradient(135deg,#6b6b6b,#3b3b3b);width:80px;height:80px}
    .planet.venus{background:linear-gradient(135deg,#ffcf8b,#b77b36);width:110px;height:110px}
    .planet.earth{background:linear-gradient(135deg,#6dd3ff,#2c8b6b);width:130px;height:130px;box-shadow:0 20px 40px rgba(12,95,125,0.18)}
    .planet.mars{background:linear-gradient(135deg,#ff7b6b,#b23b32);width:95px;height:95px}
    .planet.jupiter{background:linear-gradient(135deg,#f8d8b8,#b37f47);width:170px;height:170px}
    .planet.saturn{background:linear-gradient(135deg,#f1e6d8,#c2a77a);width:150px;height:150px}
    .planet.uranus{background:linear-gradient(135deg,#bfe7ff,#7bd3f0);width:120px;height:120px}
    .planet.neptune{background:linear-gradient(135deg,#7aa6ff,#2b4fe6);width:125px;height:125px}

    /* rings for saturn */
    .planet.saturn::after{content:'';position:absolute;width:230px;height:28px;border-radius:999px;background:linear-gradient(90deg, rgba(255,255,255,0.06), rgba(0,0,0,0.06));transform:rotate(20deg);left:calc(50% - 115px);top:55%}

    /* reveal class when the element comes into view */
    .reveal{opacity:1;transform:none}
    .reveal .label{opacity:1;transform:translateY(0)}

    /* info card when clicking planet */
    .info-card{
      position:fixed;right:18px;bottom:18px;max-width:360px;background:linear-gradient(180deg, rgba(255,255,255,0.04), rgba(255,255,255,0.02));padding:18px;border-radius:14px;box-shadow:0 18px 40px rgba(0,0,0,.5);backdrop-filter: blur(8px);opacity:0;transform:translateY(20px) scale(.98);pointer-events:none;transition:all .28s var(--ease);z-index:30;border:1px solid rgba(255,255,255,0.03)
    }
    .info-card.show{opacity:1;transform:none;pointer-events:auto}
    .info-card header{display:flex;gap:12px;align-items:center}
    .info-card .mini-planet{width:54px;height:54px;border-radius:50%;flex:0 0 54px}
    .info-card h3{margin:0;font-size:16px}
    .info-card p{color:var(--muted);margin:8px 0 0;font-size:14px}

    /* scroll progress */
    .progress{position:fixed;left:50%;transform:translateX(-50%);bottom:10px;height:6px;width:40%;background:var(--glass);border-radius:99px;overflow:hidden;z-index:60}
    .progress > i{display:block;height:100%;width:0%;background:linear-gradient(90deg,var(--accent),var(--accent-2));transition:width .12s}

    /* floating planet full-screen showcase */
    .showcase{display:grid;grid-template-columns:1fr 420px;gap:30px;align-items:center}
    .orbit{
      position:relative;height:420px;border-radius:12px;background:linear-gradient(180deg, rgba(255,255,255,0.01), transparent);
      overflow:visible;padding:30px;display:flex;align-items:center;justify-content:center
    }
    .orbit .orbiter{position:absolute;border-radius:50%;display:flex;align-items:center;justify-content:center}
    .orbit .orbit-path{position:absolute;border-radius:50%;border:1px dashed rgba(255,255,255,0.03)}

    /* small responsive tweaks */
    @media (max-width:900px){
      .showcase{grid-template-columns:1fr}
      .title{font-size:36px}
      .o-moon{width:56px;height:56px}
    }

    /* subtle micro-animations */
    .pulse{animation:pulse 3s infinite}
    @keyframes pulse{0%{transform:scale(1)}50%{transform:scale(1.04)}100%{transform:scale(1)}}

    .floaty{animation:floaty 8s var(--ease) infinite}
    @keyframes floaty{0%{transform:translateY(0)}50%{transform:translateY(-18px)}100%{transform:translateY(0)}}

    /* reveal text animation */
    .fade-in-up{opacity:0;transform:translateY(18px);transition:all .7s var(--ease)}
    .fade-in-up.visible{opacity:1;transform:none}

    /* instructions bubble */
    .help{position:fixed;left:18px;bottom:18px;background:var(--card);padding:10px 12px;border-radius:12px;font-size:13px;color:var(--muted);backdrop-filter:blur(6px);z-index:40}
  </style>
</head>
<body>
  <canvas id="starfield"></canvas>
  <div class="wrap">
    <header>
      <div class="title">
        <div class="s">s</div>
        <div class="o-moon" aria-hidden="true"></div>
        <div class="nar">nar</div>
      </div>
      <div style="flex:1"></div>
      <div style="text-align:right">
        <div class="subtitle">Explorador interativo dos planetas — role e descubra</div>
      </div>
    </header>

    <main>
      <section class="hero" id="intro">
        <div class="panel">
          <h1 class="fade-in-up" style="font-size:28px;margin:0 0 8px">Bem-vindo ao <strong>sOnar</strong></h1>
          <p class="lead fade-in-up" style="transition-delay:.12s">
            Um passeio interativo pelo sistema planetário — navegue com o scroll, clique nos planetas para ver detalhes, mova o mouse para sentir o efeito parallax e escute o ping sonoro quando quiser localizar um planeta.
          </p>

          <div style="margin-top:26px" class="planets-row">
            <div class="planet mercury" data-planet="Mercúrio">
              <div class="label">Mercúrio</div>
            </div>
            <div class="planet venus" data-planet="Vênus">
              <div class="label">Vênus</div>
            </div>
            <div class="planet earth" data-planet="Terra">
              <div class="label">Terra</div>
            </div>
            <div class="planet mars" data-planet="Marte">
              <div class="label">Marte</div>
            </div>
            <div class="planet jupiter" data-planet="Júpiter">
              <div class="label">Júpiter</div>
            </div>
            <div class="planet saturn" data-planet="Saturno">
              <div class="label">Saturno</div>
            </div>
            <div class="planet uranus" data-planet="Urano">
              <div class="label">Urano</div>
            </div>
            <div class="planet neptune" data-planet="Netuno">
              <div class="label">Netuno</div>
            </div>
          </div>
        </div>

        <div class="panel">
          <div class="showcase">
            <div class="orbit" id="orbit-stage">
              <!-- orbit elements injected by JS -->
            </div>

            <aside style="background:var(--glass);padding:20px;border-radius:12px">
              <h3 id="planet-name">Clique em um planeta</h3>
              <p id="planet-desc" style="color:var(--muted)">Informações sobre o planeta aparecerão aqui. Experimente o modo "ping" (ícone no topo) para ouvir um sinal sonoro que localiza o planeta selecionado.</p>
              <div style="margin-top:12px">
                <button id="auto-rotate" style="padding:8px 12px;border-radius:8px;border:0;background:linear-gradient(90deg,var(--accent),var(--accent-2));color:#022">Alternar rotação</button>
              </div>
            </aside>
          </div>
        </div>
      </section>

      <!-- Multiple reveal sections for storytelling -->
      <section class="fade-in-up" id="section-1">
        <h2>Como funciona</h2>
        <p>Os planetas aparecem com uma animação suave quando você rola a página. Cada planeta tem características visuais e interações: hover para micro-feedback, clique para abrir card de informação, e animações orbitais no palco central.</p>
      </section>

      <section class="fade-in-up" id="section-2">
        <h2>Interatividade</h2>
        <p>Use o mouse para aplicar parallax — os planetas se movem com leve atraso — e toque (ou clique) nas bolhas para obter curiosidades. Há também um pequeno gerador de som (ping) para lembrar o nome do planeta.</p>
      </section>

      <section class="fade-in-up" id="section-3">
        <h2>Design e cores</h2>
        <p>As cores foram escolhidas para remeter a tons espaciais — azuis frios para os gigantes, alaranjados para Marte e tons terrosos para Júpiter e Saturno. A tipografia é moderna e legível com micro animações para dar vida ao conteúdo.</p>
      </section>

    </main>

    <div class="info-card" id="infoCard" role="dialog" aria-hidden="true">
      <header>
        <div class="mini-planet" id="miniPlanet"></div>
        <div>
          <h3 id="infoTitle"></h3>
          <div style="font-size:12px;color:var(--muted)" id="infoSubtitle"></div>
        </div>
      </header>
      <p id="infoText"></p>
    </div>

    <div class="help">Dica: role a página e clique nos planetas. Mova o mouse para parallax e toque nos planetas no celular.</div>

    <div class="progress" aria-hidden="true"><i></i></div>
  </div>

  <script>
    /* ===== Starfield background ===== */
    const canvas = document.getElementById('starfield');
    const ctx = canvas.getContext('2d');
    function resize(){
      canvas.width = innerWidth * devicePixelRatio;
      canvas.height = innerHeight * devicePixelRatio;
      canvas.style.width = innerWidth + 'px';
      canvas.style.height = innerHeight + 'px';
      ctx.scale(devicePixelRatio, devicePixelRatio);
      drawStars();
    }

    function drawStars(){
      const w = innerWidth; const h = innerHeight;
      ctx.clearRect(0,0,canvas.width, canvas.height);
      const count = Math.floor((w*h)/6000);
      for(let i=0;i<count;i++){
        const x = Math.random()*w;
        const y = Math.random()*h;
        const r = Math.random()*1.4;
        const alpha = 0.2+Math.random()*0.9;
        ctx.beginPath(); ctx.fillStyle = 'rgba(255,255,255,'+alpha+')'; ctx.arc(x,y,r,0,Math.PI*2); ctx.fill();
      }
    }
    addEventListener('resize', resize);resize();

    /* ===== small parallax on mousemove ===== */
    document.addEventListener('mousemove', e=>{
      const px = (e.clientX / innerWidth - .5) * 12;
      const py = (e.clientY / innerHeight - .5) * 8;
      document.querySelectorAll('.planet').forEach((p, i)=>{
        const depth = (i%4)/6 + 0.06;
        p.style.transform = `translate(${px*depth}px, ${py*depth}px) scale(${p.classList.contains('reveal')?1.02:1})`;
      });
    });

    /* ===== planets data ===== */
    const planets = [
      {id:'Mercúrio',key:'mercury',desc:'Menor planeta e mais próximo do Sol. Superfície rochosa e temperaturas extremas.'},
      {id:'Vênus',key:'venus',desc:'Conhecido por sua atmosfera densa e efeito estufa. Brilhante no céu noturno.'},
      {id:'Terra',key:'earth',desc:'Nosso lar — água em estado líquido, atmosfera rica em oxigênio e vida.'},
      {id:'Marte',key:'mars',desc:'O planeta vermelho, alvo de muitas missões e sondas por causa do passado aquoso.'},
      {id:'Júpiter',key:'jupiter',desc:'O maior planeta do sistema — gigante gasoso com faixas e a famosa Grande Mancha Vermelha.'},
      {id:'Saturno',key:'saturn',desc:'Famoso por seus anéis espetaculares formados por gelo e rochas.'},
      {id:'Urano',key:'uranus',desc:'Gigante gasoso gelado com tonalidade azul-esverdeada e inclinação axial incomum.'},
      {id:'Netuno',key:'neptune',desc:'Planeta azul intenso, ventos extremamente fortes e atmosfera dinâmica.'}
    ];

    /* ===== reveal with IntersectionObserver ===== */
    const io = new IntersectionObserver((entries)=>{
      entries.forEach(en=>{
        if(en.isIntersecting){
          en.target.classList.add('reveal');
          const innerLabel = en.target.querySelector('.label'); if(innerLabel) innerLabel.style.transitionDelay='0.08s';
        }
      });
    },{threshold:.12});

    document.querySelectorAll('.planet').forEach(el=>{io.observe(el)});
    document.querySelectorAll('.fade-in-up').forEach(el=>io.observe(el));

    /* ===== orbit stage population ===== */
    const orbitStage = document.getElementById('orbit-stage');
    planets.forEach((p, index)=>{
      const orb = document.createElement('div'); orb.className='orbiter';
      const distance = 40 + index*34 + (index>4?40:0);
      const size = Math.min(60 + index*12, 170);
      orb.style.width = distance*2+'px'; orb.style.height = distance*2+'px'; orb.style.left = 'calc(50% - '+distance+'px)'; orb.style.top = 'calc(50% - '+distance+'px)';
      orb.style.opacity = .9; orb.style.transform = 'scale(1)';
      // orbit path
      const path = document.createElement('div'); path.className='orbit-path'; path.style.width='100%'; path.style.height='100%';
      orb.appendChild(path);
      // planet inside
      const moon = document.createElement('div'); moon.className='planet '+p.key; moon.style.width=size+'px'; moon.style.height=size+'px'; moon.dataset.planet = p.id;
      moon.style.left = 'calc(50% - '+(size/2)+'px)'; moon.style.top = (distance - size/2)+'px'; moon.style.position='absolute';
      moon.style.transition='transform .6s var(--ease)';
      const label = document.createElement('div'); label.className='label'; label.textContent = p.id; moon.appendChild(label);
      orb.appendChild(moon);
      orbitStage.appendChild(orb);

      // animate rotation
      const dur = (20 + index*6) + 's';
      orb.style.animation = `spin ${dur} linear infinite`;
      orb.style.animationDelay = (index*0.6)+'s';

      // add click for info
      moon.addEventListener('click', ()=>showInfo(p, moon));
      moon.addEventListener('touchstart', ()=>showInfo(p, moon));

    });

    // spin keyframe injection
    const styleTag = document.createElement('style');
    styleTag.textContent = `@keyframes spin{from{transform:rotate(0deg)}to{transform:rotate(360deg)}}`;
    document.head.appendChild(styleTag);

    /* ===== info card logic ===== */
    const infoCard = document.getElementById('infoCard');
    const mini = document.getElementById('miniPlanet');
    const infoTitle = document.getElementById('infoTitle');
    const infoSub = document.getElementById('infoSubtitle');
    const infoText = document.getElementById('infoText');

    function showInfo(p, elm){
      infoTitle.textContent = p.id;
      infoSub.textContent = 'Planeta — '+p.id;
      infoText.textContent = p.desc;
      mini.className = 'mini-planet '+p.key;
      infoCard.classList.add('show');
      infoCard.setAttribute('aria-hidden','false');
      // ping sound
      playPing();
    }

    document.addEventListener('click', (e)=>{
      if(!e.target.closest('.planet') && !e.target.closest('#infoCard')){
        infoCard.classList.remove('show'); infoCard.setAttribute('aria-hidden','true');
      }
    });

    /* ===== progress bar ===== */
    const progress = document.querySelector('.progress>i');
    function updateProgress(){
      const h = document.documentElement.scrollHeight - innerHeight;
      const pct = Math.min(100, Math.max(0, (scrollY/h)*100));
      progress.style.width = pct+'%';
    }
    addEventListener('scroll', ()=>{updateProgress()}); updateProgress();

    /* ===== fade in on load for hero elements ===== */
    window.addEventListener('load', ()=>{
      document.querySelectorAll('.fade-in-up').forEach((el,i)=>setTimeout(()=>el.classList.add('visible'), i*120));
    });

    /* ===== ping sound generator (WebAudio) ===== */
    let audioCtx;
    function playPing(){
      try{
        if(!audioCtx) audioCtx = new (window.AudioContext||window.webkitAudioContext)();
        const o = audioCtx.createOscillator();
        const g = audioCtx.createGain();
        o.type='sine'; o.frequency.setValueAtTime(900, audioCtx.currentTime);
        g.gain.setValueAtTime(0.0001, audioCtx.currentTime);
        g.gain.exponentialRampToValueAtTime(0.25, audioCtx.currentTime+0.02);
        o.connect(g); g.connect(audioCtx.destination);
        o.start(); o.frequency.exponentialRampToValueAtTime(250, audioCtx.currentTime+0.4);
        g.gain.exponentialRampToValueAtTime(0.0001, audioCtx.currentTime+0.5);
        o.stop(audioCtx.currentTime+0.52);
      }catch(e){console.warn('Audio não suportado',e)}
    }

    /* ===== auto rotate toggle for orbit stage ===== */
    let rotating = true;
    document.getElementById('auto-rotate').addEventListener('click', ()=>{
      rotating = !rotating;
      document.querySelectorAll('.orbiter').forEach((o)=> o.style.animationPlayState = rotating? 'running':'paused');
      document.getElementById('auto-rotate').textContent = rotating? 'Alternar rotação':'Continuar rotação';
    });

    /* small keyboard accessibility: press number keys 1-8 to select planets */
    addEventListener('keydown', e=>{
      if(e.key>='1' && e.key<='8'){
        const idx = Number(e.key)-1; const p = planets[idx]; if(p){
          const el = document.querySelectorAll('.planet')[idx]; if(el) showInfo(p, el);
        }
      }
    });

    /* little polish: animate initial entrance of planets in top row */
    document.querySelectorAll('.planets-row .planet').forEach((p,i)=>{
      setTimeout(()=>{p.classList.add('reveal')}, 220 + i*90);
      p.addEventListener('click', ()=>{
        const data = planets.find(x=>x.id===p.dataset.planet);
        if(data) showInfo(data,p);
      });
    });

    /* touch support: quick tap shows info */
    document.querySelectorAll('.planet').forEach(el=>{
      el.addEventListener('touchstart', ()=>{el.classList.add('reveal')});
    });

    // ensure high-DPI starfield continues to look good when devicePixelRatio changes
    let lastDPR = devicePixelRatio;
    setInterval(()=>{ if(devicePixelRatio !== lastDPR){ lastDPR = devicePixelRatio; resize(); } }, 800);
  </script>
</body>
</html>
